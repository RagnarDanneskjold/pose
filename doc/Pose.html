<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Pose
  
    &mdash; Documentation by YARD 0.7.3
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo; 
    
    
    <span class="title">Pose</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: Pose
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1">ActiveSupport::Concern</dd>
      
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/pose.rb<span class="defines">,<br />
  lib/pose/version.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    Polymorphic search for ActiveRecord objects.

  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Pose/InstanceMethods.html" title="Pose::InstanceMethods (module)">InstanceMethods</a></span>
    
   
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="CONFIGURATION-constant" class="">CONFIGURATION =
          <div class="docstring">
  <div class="discussion">
    By default, doesn't run in tests.
Set this to true to test the search functionality.

  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span> <span class='symbol val'>:search_in_tests</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span> <span class='rbrace token'>}</span>
</pre></dd>
      
        <dt id="VERSION-constant" class="">VERSION =
          
        </dt>
        <dd><pre class="code"><span class='string val'>&quot;0.0.1&quot;</span>
</pre></dd>
      
    </dl>
  


  


  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_words_to_add-class_method" title="get_words_to_add (class method)">+ (Array&lt;String&gt;) <strong>get_words_to_add</strong>(existing_words, new_words) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>Returns all strings that are in new_words, but not in existing_words.</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_words_to_remove-class_method" title="get_words_to_remove (class method)">+ (Array&lt;String&gt;) <strong>get_words_to_remove</strong>(existing_words, new_words) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>Returns the id of all word objects that are in existing_words, but not in new_words.</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_url-class_method" title="is_url (class method)">+ (Boolean) <strong>is_url</strong>(word) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>Returns whether the given string is a URL.</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#root_word-class_method" title="root_word (class method)">+ (String) <strong>root_word</strong>(raw_word) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>Simplifies the given word to a generic search form.</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-class_method" title="search (class method)">+ (Object) <strong>search</strong>(query, classes) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>Returns all objects matching the given query.</div></span>
  
</li>

      
    </ul>
  


  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="get_words_to_add-class_method">
  
    + (<tt>Array&lt;String&gt;</tt>) <strong>get_words_to_add</strong>(existing_words, new_words) 
  

  
</p><div class="docstring">
  <div class="discussion">
    Returns all strings that are in new_words, but not in existing_words.
Helper method.

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>existing_words</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The words that are already associated with the object.</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_words</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The words thet the object should have from now on.</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The words that need to be added to the existing_words array.</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pose.rb', line 66</span>

<span class='def def kw'>def</span> <span class='Pose constant id'>Pose</span><span class='dot token'>.</span><span class='get_words_to_add identifier id'>get_words_to_add</span> <span class='existing_words identifier id'>existing_words</span><span class='comma token'>,</span> <span class='new_words identifier id'>new_words</span>
  <span class='new_words identifier id'>new_words</span> <span class='minus op'>-</span> <span class='existing_words identifier id'>existing_words</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:text</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_words_to_remove-class_method">
  
    + (<tt>Array&lt;String&gt;</tt>) <strong>get_words_to_remove</strong>(existing_words, new_words) 
  

  
</p><div class="docstring">
  <div class="discussion">
    Returns the id of all word objects that are in existing_words, but not in new_words.
Helper method.

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>existing_words</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The words that are already associated with the object.</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_words</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The words thet the object should have from now on.</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The words that need to be removed from the existing_words array.</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pose.rb', line 75</span>

<span class='def def kw'>def</span> <span class='Pose constant id'>Pose</span><span class='dot token'>.</span><span class='get_words_to_remove identifier id'>get_words_to_remove</span> <span class='existing_words identifier id'>existing_words</span><span class='comma token'>,</span> <span class='new_words identifier id'>new_words</span>
  <span class='existing_words identifier id'>existing_words</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='existing_word identifier id'>existing_word</span><span class='bitor op'>|</span>
    <span class='new_words identifier id'>new_words</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='existing_word identifier id'>existing_word</span><span class='dot token'>.</span><span class='text identifier id'>text</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='nil nil kw'>nil</span> <span class='colon op'>:</span> <span class='existing_word identifier id'>existing_word</span>
  <span class='end end kw'>end</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="is_url-class_method">
  
    + (<tt>Boolean</tt>) <strong>is_url</strong>(word) 
  

  
</p><div class="docstring">
  <div class="discussion">
    Returns whether the given string is a URL.

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>word</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The string to check.</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pose.rb', line 84</span>

<span class='def def kw'>def</span> <span class='Pose constant id'>Pose</span><span class='dot token'>.</span><span class='is_url identifier id'>is_url</span> <span class='word identifier id'>word</span>
  <span class='uri identifier id'>uri</span> <span class='assign token'>=</span> <span class='URI constant id'>URI</span><span class='colon2 op'>::</span><span class='parse identifier id'>parse</span> <span class='word identifier id'>word</span>
  <span class='return return kw'>return</span> <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='scheme identifier id'>scheme</span> <span class='eq op'>==</span> <span class='string val'>'http'</span>
<span class='rescue rescue kw'>rescue</span> <span class='URI constant id'>URI</span><span class='colon2 op'>::</span><span class='InvalidURIError constant id'>InvalidURIError</span>
  <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="root_word-class_method">
  
    + (<tt>String</tt>) <strong>root_word</strong>(raw_word) 
  

  
</p><div class="docstring">
  <div class="discussion">
    Simplifies the given word to a generic search form.

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>raw_word</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The word to make searchable.</div>
      
    </li>
  
</ul>

<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The stemmed version of the word.</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pose.rb', line 94</span>

<span class='def def kw'>def</span> <span class='Pose constant id'>Pose</span><span class='dot token'>.</span><span class='root_word identifier id'>root_word</span> <span class='raw_word identifier id'>raw_word</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='raw_word_copy identifier id'>raw_word_copy</span> <span class='assign token'>=</span> <span class='raw_word identifier id'>raw_word</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>-1</span><span class='rbrack token'>]</span>
  <span class='raw_word_copy identifier id'>raw_word_copy</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span> <span class='regexp val'>/[()*&lt;&gt;'&quot;,;]/</span><span class='comma token'>,</span> <span class='string val'>' '</span>
  <span class='raw_word_copy identifier id'>raw_word_copy</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span> <span class='regexp val'>/\s+/</span><span class='comma token'>,</span> <span class='string val'>' '</span>
  <span class='raw_word_copy identifier id'>raw_word_copy</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>' '</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='word identifier id'>word</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='Pose constant id'>Pose</span><span class='dot token'>.</span><span class='is_url identifier id'>is_url</span><span class='lparen token'>(</span><span class='word identifier id'>word</span><span class='rparen token'>)</span>
      <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='concat identifier id'>concat</span> <span class='word identifier id'>word</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/[\.\/\:]/</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='delete_if identifier id'>delete_if</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='word identifier id'>word</span><span class='bitor op'>|</span> <span class='word identifier id'>word</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span><span class='rbrace token'>}</span>
    <span class='else else kw'>else</span>
      <span class='word identifier id'>word</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span> <span class='regexp val'>/[\-\/\._:]/</span><span class='comma token'>,</span> <span class='string val'>' '</span>
      <span class='word identifier id'>word</span><span class='dot token'>.</span><span class='gsub! fid id'>gsub!</span> <span class='regexp val'>/\s+/</span><span class='comma token'>,</span> <span class='string val'>' '</span>
      <span class='word identifier id'>word</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>' '</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='w identifier id'>w</span><span class='bitor op'>|</span>
        <span class='stemmed_word identifier id'>stemmed_word</span> <span class='assign token'>=</span>  <span class='w identifier id'>w</span><span class='dot token'>.</span><span class='parameterize identifier id'>parameterize</span><span class='dot token'>.</span><span class='singularize identifier id'>singularize</span>
        <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='concat identifier id'>concat</span> <span class='stemmed_word identifier id'>stemmed_word</span><span class='dot token'>.</span><span class='split identifier id'>split</span> <span class='string val'>' '</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='result identifier id'>result</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="search-class_method">
  
    + (<tt>Object</tt>) <strong>search</strong>(query, classes) 
  

  
</p><div class="docstring">
  <div class="discussion">
    Returns all objects matching the given query.

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>query</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The search query as entered by the user.</div>
      
    </li>
  
    <li>
      
        <span class='name'>classes</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>The classes that should be returned.</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pose.rb', line 117</span>

<span class='def def kw'>def</span> <span class='Pose constant id'>Pose</span><span class='dot token'>.</span><span class='search identifier id'>search</span> <span class='query identifier id'>query</span><span class='comma token'>,</span> <span class='classes identifier id'>classes</span>
  
  <span class='comment val'># Turn 'classes' into an array.</span>
  <span class='classes identifier id'>classes</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='classes identifier id'>classes</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span>
  <span class='classes_names identifier id'>classes_names</span> <span class='assign token'>=</span> <span class='classes identifier id'>classes</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='bitand op'>&amp;</span><span class='symbol val'>:name</span>

  <span class='comment val'># Get the ids of the results.</span>
  <span class='result_classes_and_ids identifier id'>result_classes_and_ids</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='query identifier id'>query</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>' '</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='query_word identifier id'>query_word</span><span class='bitor op'>|</span>
    <span class='current_word_classes_and_ids identifier id'>current_word_classes_and_ids</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='classes identifier id'>classes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='clazz identifier id'>clazz</span><span class='bitor op'>|</span> <span class='current_word_classes_and_ids identifier id'>current_word_classes_and_ids</span><span class='lbrack token'>[</span><span class='clazz identifier id'>clazz</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
    <span class='PoseAssignment constant id'>PoseAssignment</span><span class='dot token'>.</span><span class='joins identifier id'>joins</span><span class='lparen token'>(</span><span class='symbol val'>:pose_word</span><span class='rparen token'>)</span> \
                  <span class='dot token'>.</span><span class='where identifier id'>where</span><span class='lparen token'>(</span><span class='symbol val'>:pose_words</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:text</span><span class='dot token'>.</span><span class='matches identifier id'>matches</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='dstring node'>&quot;#{query_word}%&quot;</span><span class='rbrace token'>}</span><span class='comma token'>,</span>
                         <span class='symbol val'>:posable_type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='classes_names identifier id'>classes_names</span><span class='rparen token'>)</span> \
                  <span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='pose_assignment identifier id'>pose_assignment</span><span class='bitor op'>|</span>
      <span class='current_word_classes_and_ids identifier id'>current_word_classes_and_ids</span><span class='lbrack token'>[</span><span class='pose_assignment identifier id'>pose_assignment</span><span class='dot token'>.</span><span class='posable_type identifier id'>posable_type</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='pose_assignment identifier id'>pose_assignment</span><span class='dot token'>.</span><span class='posable_id identifier id'>posable_id</span>
    <span class='end end kw'>end</span>
    
    <span class='current_word_classes_and_ids identifier id'>current_word_classes_and_ids</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='class_name identifier id'>class_name</span><span class='comma token'>,</span> <span class='ids identifier id'>ids</span><span class='bitor op'>|</span>
      <span class='if if kw'>if</span> <span class='result_classes_and_ids identifier id'>result_classes_and_ids</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span> <span class='class_name identifier id'>class_name</span>
        <span class='result_classes_and_ids identifier id'>result_classes_and_ids</span><span class='lbrack token'>[</span><span class='class_name identifier id'>class_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='result_classes_and_ids identifier id'>result_classes_and_ids</span><span class='lbrack token'>[</span><span class='class_name identifier id'>class_name</span><span class='rbrack token'>]</span> <span class='bitand op'>&amp;</span> <span class='ids identifier id'>ids</span>
      <span class='else else kw'>else</span>
        <span class='result_classes_and_ids identifier id'>result_classes_and_ids</span><span class='lbrack token'>[</span><span class='class_name identifier id'>class_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='ids identifier id'>ids</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># Load the results by id.</span>
  <span class='result identifier id'>result</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='classes identifier id'>classes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='clazz identifier id'>clazz</span><span class='bitor op'>|</span> <span class='result identifier id'>result</span><span class='lbrack token'>[</span><span class='clazz identifier id'>clazz</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span> <span class='rbrace token'>}</span>
  <span class='result_classes_and_ids identifier id'>result_classes_and_ids</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='class_name identifier id'>class_name</span><span class='comma token'>,</span> <span class='ids identifier id'>ids</span><span class='bitor op'>|</span>
    <span class='result_class identifier id'>result_class</span> <span class='assign token'>=</span> <span class='Kernel constant id'>Kernel</span><span class='dot token'>.</span><span class='const_get identifier id'>const_get</span> <span class='class_name identifier id'>class_name</span>
    <span class='next next kw'>next</span> <span class='unless unless_mod kw'>unless</span> <span class='classes identifier id'>classes</span><span class='dot token'>.</span><span class='include? fid id'>include?</span> <span class='result_class identifier id'>result_class</span>
    <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='ids identifier id'>ids</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='result identifier id'>result</span><span class='lbrack token'>[</span><span class='result_class identifier id'>result_class</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='result_class identifier id'>result_class</span><span class='dot token'>.</span><span class='where identifier id'>where</span> <span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ids identifier id'>ids</span>
  <span class='end end kw'>end</span>

  <span class='result identifier id'>result</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed Nov 16 11:48:27 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.3 (ruby-1.8.7).
</div>

  </body>
</html>